<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>YagoutPay Docs</title>
  <meta name="color-scheme" content="dark" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
  <style>
  :root { --bg:#0c1013; --panel:#141b20e6; --panel-solid:#141b20; --panel-alt:#1c262ed1; --border:#25323d; --text:#e7ecf2; --muted:#8fa4b3; --accent:#42b883; --accent-fade:#42b88333; --danger:#ff4d50; --radius:14px; --code:#1a242b; --shadow:0 4px 26px -10px rgba(0,0,0,.55),0 0 0 1px #15242d; --gradient:linear-gradient(165deg,#0c1216 0%,#0f171d 65%); --focus:0 0 0 2px #0c1013,0 0 0 4px #42b883; --scrollbar:#2c3a44; --scrollbar-hover:#3d4d58; --font-stack:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif; --transition:.18s cubic-bezier(.4,.14,.3,1); --mx:0; --my:0; }
  * { box-sizing:border-box; }
  body { margin:0; font-family:var(--font-stack); background:var(--gradient) fixed; color:var(--text); -webkit-font-smoothing:antialiased; line-height:1.7; font-size:18px; }
  /* Adjusted global background glow from green to red to echo logo 'pay' segment */
  body::before { content:""; position:fixed; inset:0; background:radial-gradient(1200px 900px at 80% 120%,rgba(255,24,64,.14),transparent 70%); opacity:.55; pointer-events:none; z-index:-1; }
  body::after { content:""; position:fixed; inset:0; background:radial-gradient(900px 800px at -5% 0%,rgba(120,12,30,.42),transparent 70%); pointer-events:none; z-index:-1; }
  /* Light mode removed */
  header { backdrop-filter:blur(14px) saturate(140%); -webkit-backdrop-filter:blur(14px) saturate(140%); display:flex; gap:18px; align-items:center; padding:14px 22px; border-bottom:1px solid var(--border); background:var(--panel); position:sticky; top:0; z-index:50; }
  header h1 { font-size:17px; margin:0; font-weight:600; letter-spacing:.5px; display:flex; align-items:center; gap:10px; }
  header .logo { display:flex; align-items:center; line-height:0; }
  header .logo svg { height:40px; width:auto; display:block; }
  header input { flex:1; background:var(--panel-alt); border:1px solid var(--border); color:var(--text); padding:10px 14px; border-radius:9px; font-size:14px; outline:none; transition:var(--transition); box-shadow:inset 0 0 0 1px #00000010; }
  header input:focus { box-shadow:var(--focus); }
  /* Theme toggle removed */
  #layout { display:flex; min-height:calc(100vh - 60px); }
  nav { width:255px; max-width:60vw; border-right:1px solid var(--border); background:var(--panel); padding:22px 18px 80px; overflow:auto; }
  nav h3 { margin:18px 0 10px; font-size:11px; letter-spacing:1px; font-weight:600; color:var(--muted); text-transform:uppercase; }
  nav a { display:flex; align-items:center; gap:6px; padding:10px 14px; border-radius:8px; text-decoration:none; color:var(--text); font-size:16px; line-height:1.35; margin-bottom:6px; transition:var(--transition); position:relative; }
  nav a:hover { background:var(--panel-alt); }
  nav a.active { background:linear-gradient(95deg,#42b883 0%,#2f9c6f 95%); color:#fff; box-shadow:0 4px 14px -5px var(--accent-fade); }
  nav a.active::after { content:""; position:absolute; inset:0; border:1px solid #ffffff30; border-radius:inherit; pointer-events:none; }
  main { flex:1; padding:46px clamp(20px,3vw,60px) 90px; overflow:auto; }
  section { max-width:960px; }
  section h2 { margin-top:0; font-size:clamp(1.85rem,2.6vw,2.2rem); letter-spacing:.3px; font-weight:600; background:linear-gradient(90deg,#ffffff,#d1f4e4 55%,#ffffff); -webkit-background-clip:text; background-clip:text; color:transparent; }
  /* Larger, stylish hero for the Introduction section */
  section#introduction h2 { margin-top:0; font-size:clamp(2.6rem,3.8vw,3.6rem); letter-spacing:0.6px; font-weight:700; background:linear-gradient(90deg,#ffffff,#d1f4e4 55%,#ffffff); -webkit-background-clip:text; background-clip:text; color:transparent; margin-bottom:6px; }
  section#introduction .card { padding:22px 26px; border-radius:20px; background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent); border:1px solid rgba(255,255,255,0.03); }
  section h3 { margin-top:42px; font-size:clamp(1.15rem,1.9vw,1.35rem); font-weight:600; }
  section p, section li { line-height:1.8; }
  /* Larger base paragraph size for readability */
  section p { font-size:18px; }
  code, pre { background:var(--code); font-family:'JetBrains Mono',ui-monospace,SFMono-Regular,Consolas,'Courier New',monospace; font-size:13.5px; }
  pre { padding:20px 22px 24px; border:1px solid #26343f; border-radius:14px; overflow:auto; position:relative; background:#1c262e; box-shadow:0 4px 18px -6px #00000080,0 0 0 1px #1f2e38; }
  pre[data-lang]::before { content:attr(data-lang); position:absolute; top:0; left:0; background:linear-gradient(90deg,#30424f,#1c262e 80%); color:#8fb6a2; font-size:10px; letter-spacing:.7px; padding:4px 10px 5px; border-bottom-right-radius:10px; border-top-left-radius:14px; text-transform:uppercase; font-weight:600; }
  /* small reference card used by Stage 2 keys and examples */
  .ref-card { padding:14px 16px; border-radius:12px; background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent); border:1px solid rgba(255,255,255,0.03); margin:12px 0 18px; }
  .ref-card .muted { color:var(--muted); font-size:13px; }
  .small-table { width:100%; border-collapse:collapse; margin-top:12px; }
  .small-table th, .small-table td { padding:8px 10px; border:1px solid rgba(255,255,255,0.03); font-size:14px; }
  .small-note { display:inline-block; background:#102024; padding:6px 10px; border-radius:8px; font-size:13px; margin-left:6px; color:#9fd7b7; }
  button.copy { position:absolute; top:8px; right:8px; background:#24323c; border:1px solid #2f404b; color:#8ca0ad; font-size:11px; padding:6px 12px; border-radius:8px; cursor:pointer; }
  button.copy:hover { color:#fff; background:#2d3c46; }
  table { width:100%; border-collapse:collapse; margin:22px 0; font-size:14px; }
  th,td { padding:9px 10px; border:1px solid var(--border); text-align:left; }
  th { background:#15202b; font-weight:600; }
  blockquote { margin:16px 0; padding:12px 16px; background:var(--panel-alt); border-left:4px solid var(--accent); border-radius:6px; }
  hr { border:none; border-top:1px solid var(--border); margin:46px 0; }
  .badge { display:inline-block; background:#20334a; padding:3px 10px; border-radius:20px; font-size:11px; margin:0 6px 6px 0; }
  .flex { display:flex; flex-wrap:wrap; gap:18px; }
  .card { background:var(--panel); border:1px solid var(--border); padding:22px 24px 26px; border-radius:var(--radius); flex:1 1 280px; min-width:260px; box-shadow:var(--shadow); position:relative; overflow:hidden; }
  .card::after { content:""; position:absolute; inset:0; background:linear-gradient(130deg,transparent 40%,var(--accent-fade)); opacity:0; transition:var(--transition); }
  .card:hover::after { opacity:.7; }
  .glass, .glass-section { position:relative; background:linear-gradient(145deg,#182127dd,#121a1fef); border:1px solid var(--border); box-shadow:0 8px 30px -12px rgba(0,0,0,.7),0 0 0 1px #1c2b33; border-radius:22px; overflow:hidden; }
  /* Lead descriptive paragraph style (applied dynamically to first paragraph per section) */
  /* Bigger descriptive lead block (made larger as requested) */
  .lead-block { font-size:clamp(1.2rem,1.06rem + .95vw,1.6rem); line-height:1.95; font-weight:520; letter-spacing:.25px; background:linear-gradient(135deg,#171e22,#0f1619 65%); margin:18px 0 46px; padding:26px 30px 30px; border:1px solid #1c262b; border-radius:20px; position:relative; }
  .lead-block:before { content:""; position:absolute; top:0; left:0; width:6px; height:100%; background:linear-gradient(180deg,#42b883,#1d5f41 70%,#133d28); border-top-left-radius:18px; border-bottom-left-radius:18px; box-shadow:0 0 0 1px #1e2d35,0 0 0 4px #42b88322; }
  .lead-block strong { color:#d0fbe7; }
  .lead-block code { background:#21323a; padding:.18em .5em; border-radius:6px; }
  /* Enlarged styled ordered list block (e.g., Quick Path) */
  /* Simplified Quick Path list: no border/panel, normal font, no numbers */
  ol.list-block { list-style:none; margin:20px 0 34px; padding:0; background:transparent; border:none; box-shadow:none; font-size:17px; line-height:1.7; position:relative; }
  ol.list-block:before { content:none; }
  ol.list-block li { padding:4px 0; margin:0 0 6px; }
  ol.list-block li:before { content:none!important; }
  ol.list-block li code { background:#21323a; padding:.15em .45em; border-radius:6px; }
  /* Unified timeline style for all descriptive lists (ordered & unordered) */
  /* Creative bullet and timeline styles used across many lists
    - .quick-steps: timeline / steps with colored rings and subtle icons
    - .fancy-list: gradient dot bullets with soft glow
    - .numbered-badges: circular numbered badges for ordered lists
    - .checklist: square checkbox-like bullets for TODO/checklist UI
    - .dot-grid: decorative small dot bullets with pattern feel
  */
  .quick-steps { list-style:none; margin:26px 0 50px; padding:0; }
  .quick-steps li { position:relative; padding:16px 12px 16px 60px; margin:8px 0; font-size:18px; line-height:1.65; background:transparent; border-radius:12px; transition:var(--transition); border:1px solid rgba(255,255,255,0.02); }
  /* simple neutral marker */
  .quick-steps li:before { content:""; position:absolute; left:28px; top:18px; width:14px; height:14px; border-radius:50%; background:var(--muted); border:1px solid rgba(255,255,255,0.03); display:block; }
  /* subtle connector line */
  .quick-steps li:after { content:""; position:absolute; left:35px; top:36px; width:1px; bottom:-8px; background:linear-gradient(180deg,rgba(255,255,255,0.03),transparent); opacity:.45; }
  .quick-steps li:last-child:after { display:none; }
  .quick-steps li:hover { background:rgba(255,255,255,0.01); }

  /* Fancy unordered lists (general docs bullets) */
  ul { list-style:none; margin:18px 0 28px; padding:0 0 0 18px; }
  ul li { position:relative; padding:8px 14px 8px 40px; margin:8px 0; background:transparent; border-radius:8px; }
  ul li:before { content:""; position:absolute; left:12px; top:12px; width:10px; height:10px; border-radius:50%; background:var(--muted); box-shadow:none; }

  /* Numbered badges for ordered lists */
  ol { list-style:none; margin:18px 0 28px; padding:0; counter-reset:doc-counter; }
  ol li { counter-increment:doc-counter; position:relative; padding:12px 14px 12px 60px; margin:10px 0; border-radius:10px; background:transparent; }
  ol li:before { content:counter(doc-counter); position:absolute; left:16px; top:10px; width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700; color:var(--text); background:rgba(255,255,255,0.04); font-size:13px; border:1px solid rgba(255,255,255,0.03); }

  /* Checklist style: square with check mark when .checked class applied to li */
  .checklist { list-style:none; margin:18px 0; padding:0; }
  .checklist li { position:relative; padding:10px 14px 10px 48px; margin:8px 0; border-radius:8px; }
  .checklist li:before { content:""; position:absolute; left:14px; top:10px; width:18px; height:18px; border-radius:4px; background:transparent; border:1px solid rgba(255,255,255,0.06); display:block; }
  .checklist li.checked:before { background:var(--muted); border-color:rgba(255,255,255,0.06); }

  /* Decorative dot-grid variant for small lists */
  .dot-grid { list-style:none; display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:12px; padding:0; margin:18px 0; }
  .dot-grid li { padding:12px; background:transparent; border-radius:10px; position:relative; border:1px solid rgba(255,255,255,0.025); }
  .dot-grid li:before { content:""; position:absolute; left:12px; top:14px; width:6px; height:6px; background:var(--muted); border-radius:2px; }

  /* Ensure existing single-line code/compact list spacing still looks good */
  .code-line.compact + ul, .code-line + ol { margin-top:10px; }

  /* TOC hero card for Introduction */
  .toc-hero { display:block; padding:18px 20px; border-radius:16px; background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent); border:1px solid rgba(255,255,255,0.03); margin:0 0 22px; }
  .toc-hero .on-this { font-size:13px; font-weight:700; text-transform:uppercase; color:var(--muted); letter-spacing:1px; }
  .toc-hero .intro-title { font-size:18px; font-weight:700; color:var(--text); margin-top:6px; }
  .toc-hero ul { margin:12px 0 0 0; padding:0; }
  .toc-hero ul li { margin:6px 0; }
  .toc-hero ul li a { color:var(--text); font-size:15px; text-decoration:none; }
  @media (max-width:640px){ .quick-steps li { padding:14px 10px 14px 46px; } .quick-steps li:before { left:14px; } .quick-steps li:after { left:20px; } }
  /* Single-line code sample block */
  .code-line { position:relative; font-family:'JetBrains Mono',ui-monospace,Consolas,'Courier New',monospace; background:#0f161a; border:1px solid #26343f; padding:14px 16px; border-radius:14px; font-size:13.5px; line-height:1.45; white-space:nowrap; overflow:auto; box-shadow:0 3px 14px -6px #000,0 0 0 1px #1d2a31; margin:16px 0 30px; }
  .code-line.wrap { white-space:normal; overflow-x:auto; word-break:break-word; }
  .code-line.wrap code { white-space:pre-wrap; }
  .code-line code { background:none; padding:0; color:#d1e5ef; }
  .code-line button.copy-line { position:absolute; top:6px; right:6px; background:#1e2a31; border:1px solid #2f404b; color:#8ca0ad; font-size:11px; padding:4px 10px; border-radius:8px; cursor:pointer; }
  .code-line button.copy-line:hover { background:#2d3c46; color:#fff; }
  .code-line.compact { padding:10px 14px; font-size:13px; margin:10px 0 16px; }
  
  /* Interactive background wrapper */
  #fxbg { position:fixed; inset:0; z-index:-3; overflow:hidden; pointer-events:none; background:radial-gradient(circle at calc(50% + var(--mx)*8%) calc(50% + var(--my)*6%),#2a0d13 0%,#0c1013 70%); transition:background-position .4s ease; }
  #fxbg::before { content:""; position:absolute; inset:-10%; background:
    repeating-linear-gradient(90deg,rgba(255,24,64,.10) 0 1px,transparent 1px 140px),
    repeating-linear-gradient(0deg,rgba(255,24,64,.09) 0 1px,transparent 1px 140px);
    opacity:.22; transform:translate(calc(var(--mx)*2%),calc(var(--my)*2%)) scale(1.05); mix-blend-mode:overlay; }
  #fxbg::after { content:""; position:absolute; inset:0; background:radial-gradient(750px 480px at calc(80% + var(--mx)*10%) calc(15% + var(--my)*8%),rgba(255,24,64,.32),transparent 70%); opacity:.40; filter:blur(2px); }
  /* Light mode background variants removed */
  .glass-section { padding:46px clamp(18px,2.6vw,54px) 60px; margin:0 0 70px; }
  .glass-section h2:first-of-type { margin-top:0; }
  .glass-section h3 { position:relative; }
  .glass-section h3:before { content:""; position:absolute; left:-14px; top:9px; width:6px; height:6px; background:var(--accent); border-radius:50%; box-shadow:0 0 0 4px var(--accent-fade); }
  .glass-section code { background:#25323a; color:#d3e5ef; padding:.15em .4em; border-radius:6px; }
  /* Light mode specific styles removed */
  ::-webkit-scrollbar { width:10px; height:10px; }
  ::-webkit-scrollbar-track { background:transparent; }
  ::-webkit-scrollbar-thumb { background:var(--scrollbar); border-radius:20px; }
  ::-webkit-scrollbar-thumb:hover { background:var(--scrollbar-hover); }
  footer { text-align:center; padding:30px 10px 60px; font-size:12px; color:var(--muted); position:relative; }
  footer:before { content:""; position:absolute; top:0; left:50%; width:60%; height:2px; transform:translateX(-50%); background:linear-gradient(90deg,transparent,#42b883,#42b883,transparent); opacity:.55; }
  a.inline { color:var(--accent); }
  @media (max-width:1100px) { main { padding:36px 34px 84px; } }
  @media (max-width:900px) { nav { position:fixed; inset:60px 0 auto; height:calc(100vh - 60px); transform:translateX(-100%); transition:var(--transition); z-index:60; width:255px; } nav.open { transform:translateX(0); box-shadow:0 0 0 999px #00000088; } #navToggle { display:inline-flex; } header { gap:12px; } }
  #navToggle { display:none; background:var(--panel); border:1px solid var(--border); color:var(--text); padding:8px 12px; border-radius:8px; cursor:pointer; }
  #apiRefContainer table code { background:none; padding:0; }
  .search-hit { background:#20334a; }
  .sr-only { position:absolute!important; width:1px!important; height:1px!important; padding:0!important; margin:-1px!important; overflow:hidden!important; clip:rect(0 0 0 0)!important; white-space:nowrap!important; border:0!important; }
  </style>
</head>
<body>
  <div id="fxbg" aria-hidden="true"></div>
  <header>
    <button id="navToggle" aria-label="Toggle navigation" title="Menu">☰</button>
    <h1>
      <span class="logo" aria-label="YagoutPay">
        <svg viewBox="0 0 600 110" role="img" aria-hidden="true">
          <defs>
            <linearGradient id="gBlue" x1="0" x2="1" y1="0" y2="1">
              <stop offset="0%" stop-color="#0a1f63" />
              <stop offset="100%" stop-color="#1b57ff" />
            </linearGradient>
            <linearGradient id="gRed" x1="0" x2="1" y1="0" y2="1">
              <stop offset="0%" stop-color="#7d0000" />
              <stop offset="100%" stop-color="#ff1840" />
            </linearGradient>
          </defs>
          <!-- Combined to remove horizontal gap -->
          <text x="0" y="78" font-size="86" font-family="Impact,Segoe UI Black,Arial Black,sans-serif" letter-spacing="2">
            <tspan fill="url(#gBlue)">yagout</tspan><tspan fill="url(#gRed)">pay</tspan>
          </text>
          <g font-family="Segoe UI Black,Arial Black,sans-serif" font-size="34" font-weight="900" letter-spacing="1">
            <text x="205" y="105" fill="#ffffff">YOUR</text>
            <text x="360" y="105" fill="#ffffff">WAY</text>
          </g>
        </svg>
      </span>
      <span class="sr-only">YagoutPay Documentation</span>
    </h1>
    <input id="search" placeholder="Search (e.g. amount, encryption, env)..." />
  <!-- Theme toggle removed -->
  </header>
  <div id="layout">
    <nav id="nav"></nav>
    <main id="content"><p>Loading documentation...</p></main>
  </div>
  <footer>YagoutPay Documentation • Theme preference stored locally.</footer>
  <script src="./docs-data.js"></script>
  <script>
  const navEl = document.getElementById('nav');
  const contentEl = document.getElementById('content');
  const searchEl = document.getElementById('search');
  const navToggle = document.getElementById('navToggle');
  // Theme toggle removed
  navToggle.addEventListener('click', ()=> navEl.classList.toggle('open'));
  // Removed theme persistence & switching; dark mode only
  function renderNav(list){ navEl.innerHTML = '<h3>Sections</h3>'; list.forEach(sec => { const a = document.createElement('a'); a.textContent = sec.title; a.href = '#' + sec.id; a.dataset.id = sec.id; a.addEventListener('click', e => { e.preventDefault(); select(sec.id); if(navEl.classList.contains('open')) navEl.classList.remove('open'); }); navEl.appendChild(a); }); }
  function mdLite(md){
    let out = md
      .replace(/^### (.*)$/gm,'<h3>$1</h3>')
      .replace(/^## (.*)$/gm,'<h2>$1</h2>')
      .replace(/^# (.*)$/gm,'<h1>$1</h1>')
      .replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>')
      .replace(/`([^`]+)`/g,'<code>$1</code>')
      .replace(/\n```(json|bash|sh)?\n([\s\S]*?)```/g,(m,lang,code)=>{ const clean = code.replace(/^[\s\n]+|[\s\n]+$/g,''); return `<pre data-lang="${lang||''}"><button class="copy" data-code="${encodeURIComponent(clean)}">Copy</button><code>${escapeHtml(clean)}</code></pre>`; });
    // Ordered list blocks (numbered) -> <ol>
    out = out.replace(/(^\d+\. [^\n]+(?:\n\d+\. [^\n]+)+)/gm,(block)=>{
      const items = block.split(/\n/).map(l=> l.replace(/^\d+\.\s+/,'').trim()).map(txt=>`<li>${txt}</li>`).join('');
      return `<ol>${items}</ol>`;
    });
    // Hyphen bullet list blocks -> <ul>
    out = out.replace(/(^- [^\n]+(?:\n- [^\n]+)+)/gm,(block)=>{
      const items = block.split(/\n/).map(l=> l.replace(/^-\s+/,'').trim()).map(txt=>`<li>${txt}</li>`).join('');
      return `<ul>${items}</ul>`;
    });
    return out;
  }
  function escapeHtml(str){ return str.replace(/[&<>"']/g,s=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;' }[s])); }
  function select(id){ const sec = window.DOCS_SECTIONS.find(s=>s.id===id) || window.DOCS_SECTIONS[0]; [...navEl.querySelectorAll('a')].forEach(a=> a.classList.toggle('active', a.dataset.id===sec.id)); const rawHtml = mdLite(sec.body); const temp = document.createElement('div'); temp.innerHTML = rawHtml; const h3s = [...temp.querySelectorAll('h3')]; h3s.forEach(h=>{ const slug = h.textContent.toLowerCase().replace(/[^a-z0-9]+/g,'-'); h.id = slug; });
    // Promote first ordered list after specific headings (e.g., Quick Path)
  // Style Quick Path explicitly (retain for potential future custom tweaks)
  h3s.forEach(h=>{ if(/quick path/i.test(h.textContent)){ let nxt = h.nextElementSibling; while(nxt && nxt.tagName==='H3') nxt = nxt.nextElementSibling; if(nxt && /^(OL|UL)$/.test(nxt.tagName)){ nxt.classList.add('quick-steps'); } } });
  // Apply quick-steps style to all ordered & unordered lists if not already styled
  temp.querySelectorAll('ol,ul').forEach(list => { if(!list.classList.contains('quick-steps')) list.classList.add('quick-steps'); });
    let toc = '';
    if(h3s.length){
      if(sec.id === 'introduction'){
        toc = `<div class="toc-hero"><div class="on-this">ON THIS PAGE</div><div class="intro-title">${sec.title}</div><ul>${h3s.map(h=>`<li><a href='#${h.id}'>${h.textContent}</a></li>`).join('')}</ul></div>`;
      } else {
        toc = `<div class="card" style="margin:0 0 26px;padding:14px 18px 18px;"><strong style="font-size:13px;letter-spacing:.8px;opacity:.85;">ON THIS PAGE</strong><ul style="list-style:none;margin:10px 0 0;padding:0;font-size:13px;">${h3s.map(h=>`<li style=\"margin:4px 0;\"><a href='#${h.id}' style='text-decoration:none;color:var(--accent);'>${h.textContent}</a></li>`).join('')}</ul></div>`;
      }
    }
    contentEl.innerHTML = `<section id="${sec.id}" class="glass-section glass"><h2>${sec.title}</h2>${toc}${temp.innerHTML}<div id="apiRefContainer"></div></section>`; attachCopy(); if(sec.id === 'api-reference') loadOpenApi(); history.replaceState(null,'','#'+sec.id); window.scrollTo({top:0,behavior:'smooth'}); }
  // After rendering, promote first descriptive paragraph (if any) to a styled lead block
  const enhanceLead = () => {
    const sectionEl = contentEl.querySelector('section');
    if(!sectionEl) return;
    // skip if hero intro already fulfills descriptive role (we only style plain paragraphs)
    const directChildren = Array.from(sectionEl.children);
    const candidate = directChildren.find(el => el.tagName === 'P');
    if(candidate && !candidate.classList.contains('lead-block')) {
      // Avoid transforming paragraphs that are extremely short (likely a heading artifact)
      if(candidate.textContent.trim().length > 40) candidate.classList.add('lead-block');
    }
  };
  // Wrap original select to include enhancement
  const _origSelect = select;
  select = function(id){ _origSelect(id); requestAnimationFrame(enhanceLead); };
  function attachCopy(){
    // Multi-line fenced code blocks
    contentEl.querySelectorAll('button.copy').forEach(btn=>{
      btn.addEventListener('click',()=>{ const raw = decodeURIComponent(btn.dataset.code); navigator.clipboard.writeText(raw); btn.textContent='Copied'; setTimeout(()=>btn.textContent='Copy',1200); });
    });
    // Single-line code-line samples
    contentEl.querySelectorAll('button.copy-line').forEach(btn=>{
      btn.addEventListener('click',()=>{ const raw = decodeURIComponent(btn.dataset.code); navigator.clipboard.writeText(raw); btn.textContent='Copied'; setTimeout(()=>btn.textContent='Copy',1200); });
    });
  }
  function loadOpenApi(){ fetch('/openapi.json').then(r=>r.json()).then(spec=>{ const c = document.getElementById('apiRefContainer'); const rows = Object.entries(spec.paths).map(([path,def])=>{ return Object.entries(def).map(([method,op])=>`<tr><td><code>${method.toUpperCase()}</code></td><td><code>${path}</code></td><td>${(op.summary||'')}</td></tr>`).join(''); }).join(''); c.innerHTML = `<h3>Endpoints</h3><table><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody>${rows}</tbody></table>`; }).catch(()=>{ document.getElementById('apiRefContainer').innerHTML = '<p style="color:var(--danger)">Failed to load OpenAPI spec.</p>'; }); }
  searchEl.addEventListener('input', () => { const q = searchEl.value.trim().toLowerCase(); if(!q){ renderNav(window.DOCS_SECTIONS); return; } const filtered = window.DOCS_SECTIONS.filter(s => s.title.toLowerCase().includes(q) || s.body.toLowerCase().includes(q)); renderNav(filtered); });
  renderNav(window.DOCS_SECTIONS);
  select(location.hash.replace('#','') || window.DOCS_SECTIONS[0].id);
  // Parallax background motion
  (function(){
    let raf = null;
    let tx = 0, ty = 0;
    const root = document.documentElement;
    function apply(){
      root.style.setProperty('--mx', (tx).toFixed(3));
      root.style.setProperty('--my', (ty).toFixed(3));
      raf = null;
    }
    window.addEventListener('pointermove', e => {
      const x = (e.clientX / window.innerWidth) - 0.5; // -0.5 .. 0.5
      const y = (e.clientY / window.innerHeight) - 0.5;
      tx = x; ty = y;
      if(!raf) raf = requestAnimationFrame(apply);
    }, { passive:true });
  })();
  </script>
</body>
</html>
